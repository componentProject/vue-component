import{k as S,p as n,C as i,H as s,G as l,L as d,M as Y,N as c,E as p,F as f,D as m,O as o,B as g}from"./vue.esm-bundler-DL_Z5ZQB.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";const r={unselect:0,selecting:1,selected:2},k=S({name:"wlYearDatePicker",computed:{oneSelected(){return this.curState===r.selecting&&(this.startYear===this.endYear||this.endYear==null)},leftYearList(){return this.yearList.slice(0,10)},rightYearList(){return this.yearList.slice(10,20)}},props:{width:{default:200},labelWidth:{default:80},labelText:{default:""},sp:{default:"至"},initYear:{default:null},value:{default:()=>[]}},data(){return{itemBg:{},startShowYear:null,endShowYear:null,yearList:[],showPanel:!1,startYear:null,endYear:null,curYear:0,curSelectedYear:0,curState:r.unselect}},watch:{value(e){const[a,h]=e;this.startYear=a,this.endYear=h}},methods:{checkStartInput(){isNaN(this.startShowYear)?this.startShowYear=this.startYear:this.startYear=this.startShowYear*1},checkEndInput(){isNaN(this.endShowYear)?this.endShowYear=this.endYear:this.endYear=this.endShowYear*1},changeYear(){if(this.startYear>this.endYear){const e=this.endYear;this.endYear=this.startYear,this.startYear=e}this.initYear&&(this.startYear=Math.max(this.startYear,this.initYear.startYear),this.endYear=Math.min(this.endYear,this.initYear.endYear)),this.startShowYear=this.startYear,this.endShowYear=this.endYear,this.startYear&&this.endYear?(this.$emit("input",[this.startYear+"",this.endYear+""]),this.$emit("change",[this.startYear+"",this.endYear+""])):console.warn("WARN:年份不合法",this.startYear,this.endYear)},onHoverItem(e){if(this.checkValidYear(e)==0&&this.curState===r.selecting){const a=this.curSelectedYear;this.endYear=Math.max(a,e),this.startYear=Math.min(a,e)}},onClickItem(e){this.checkValidYear(e)==0&&(this.curState===r.unselect||this.curState===r.selected?(this.startYear=e,this.curSelectedYear=e,this.endYear=null,this.curState=r.selecting):this.curState===r.selecting&&(this.endShowYear=this.endYear,this.startShowYear=this.startYear,this.curState=r.selected,setTimeout(()=>{this.showPanel=!1},300)),this.$emit("input",[this.startYear+"",this.endYear+""]),this.$emit("change",[this.startYear+"",this.endYear+""]))},onFocus(){this.$nextTick(()=>{this.showPanel=!0})},clickInput(e){return e.stopPropagation(),!1},updateYearList(){let e=Math.floor(this.curYear/10)*10-10;e=e<0?0:e,this.yearList=[];for(let a=0;a<20;a++)this.yearList.push(e+a)},checkValidYear(e){if(this.initYear){if(e>this.initYear.endYear)return 1;if(e<this.initYear.startYear)return-1}return 0},closePanel(e){if(this.showPanel){if(typeof e.target.className!="string"||e.target.className===""){this.$nextTick(()=>{this.changeYear(),this.showPanel=!1});return}return(e.target.className.indexOf("_inner")===-1||e.target.name==="yearInput"&&e.target!==this.$refs.inputLeft&&e.target!==this.$refs.inputRight)&&this.$nextTick(()=>{this.changeYear(),this.showPanel=!1}),e.stopPropagation(),!1}},onClickLeft(){this.curYear=+this.curYear-10,this.updateYearList()},onClickRight(){this.curYear=+this.curYear+10,this.updateYearList()}},beforeMount(){this.curYear=new Date().getFullYear(),this.updateYearList()},beforeUnmount(){document.removeEventListener("click",this.closePanel.bind(this))},mounted(){document.addEventListener("click",this.closePanel.bind(this))}}),w={key:0,class:"_inner floatPanel"},y={class:"_inner leftPanel"},L={class:"_inner panelHead"},C={class:"_inner panelContent"},I=["onClick","onMouseover"],P={class:"_inner rightPanel"},b={class:"_inner panelHead"},$={class:"_inner panelContent"},E=["onClick","onMouseover"];function V(e,a,h,F,N,T){return n(),i("div",{class:"yearPicker",ref:"yearPicker",style:d({width:e.width+"px"})},[s("div",{class:"_inner labelText",style:d({width:e.labelWidth+"px"})},l(e.labelText),5),Y(s("input",{class:"_inner",ref:"inputLeft","onUpdate:modelValue":a[0]||(a[0]=t=>e.startShowYear=t),onFocus:a[1]||(a[1]=(...t)=>e.onFocus&&e.onFocus(...t)),type:"text",onClick:a[2]||(a[2]=(...t)=>e.clickInput&&e.clickInput(...t)),name:"yearInput",onInput:a[3]||(a[3]=t=>e.checkStartInput(t)),placeholder:"选择年份"},null,544),[[c,e.startShowYear]]),s("span",null,l(e.sp),1),Y(s("input",{class:"_inner",ref:"inputRight","onUpdate:modelValue":a[4]||(a[4]=t=>e.endShowYear=t),onFocus:a[5]||(a[5]=(...t)=>e.onFocus&&e.onFocus(...t)),type:"text",onClick:a[6]||(a[6]=(...t)=>e.clickInput&&e.clickInput(...t)),name:"yearInput",onInput:a[7]||(a[7]=t=>e.checkEndInput(t)),placeholder:"选择年份"},null,544),[[c,e.endShowYear]]),e.showPanel?(n(),i("div",w,[s("div",y,[s("div",L,[s("i",{class:"_inner el-icon-d-arrow-left",onClick:a[8]||(a[8]=(...t)=>e.onClickLeft&&e.onClickLeft(...t))}),p(" "+l(e.leftYearList[0]+"-"+e.leftYearList[9]),1)]),s("div",C,[(n(!0),i(f,null,m(e.leftYearList,t=>(n(),i("div",{class:o({disabled:e.checkValidYear(t)!=0,oneSelected:t===e.startYear&&e.oneSelected,startSelected:t===e.startYear,endSelected:t===e.endYear,_inner:!0,betweenSelected:t>e.startYear&&t<e.endYear}),key:t},[s("a",{class:o({cell:!0,_inner:!0,selected:t===e.startYear||t===e.endYear}),onClick:u=>e.onClickItem(t),onMouseover:u=>e.onHoverItem(t)},l(t),43,I)],2))),128))])]),s("div",P,[s("div",b,[s("i",{class:"_inner el-icon-d-arrow-right",onClick:a[9]||(a[9]=(...t)=>e.onClickRight&&e.onClickRight(...t))}),p(" "+l(e.rightYearList[0]+"-"+e.rightYearList[9]),1)]),s("div",$,[(n(!0),i(f,null,m(e.rightYearList,t=>(n(),i("div",{class:o({disabled:e.checkValidYear(t)!=0,startSelected:t===e.startYear,endSelected:t===e.endYear,betweenSelected:t>e.startYear&&t<e.endYear}),key:t},[s("a",{class:o({cell:!0,_inner:!0,selected:t===e.endYear||t===e.startYear}),onClick:u=>e.onClickItem(t),onMouseover:u=>e.onHoverItem(t)},l(t),43,E)],2))),128))])])])):g("",!0)],4)}const H=v(k,[["render",V],["__scopeId","data-v-fe430a0d"]]);k.__docgenInfo={displayName:"wlYearDatePicker",exportName:"default",description:"",tags:{},props:[{name:"width",type:{name:"number"},defaultValue:{func:!1,value:"200"}},{name:"labelWidth",type:{name:"number"},defaultValue:{func:!1,value:"80"}},{name:"labelText",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"sp",type:{name:"string"},defaultValue:{func:!1,value:"'至'"}},{name:"initYear",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"value",type:{name:"func"},defaultValue:{func:!0,value:"() => []"}}],events:[{name:"input",type:{names:["undefined"]}},{name:"change",type:{names:["undefined"]}}],sourceFiles:["E:/project/component/vue-component/src/components/wlConfigForm/components/components/timePickerCompoents/yearDatePicker/index.vue"]};export{H as default};
